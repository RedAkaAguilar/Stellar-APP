<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MCStellar Instancias</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family:'Outfit',sans-serif;
      background:#fef6f6;
      display:flex;
      height:100vh;
      overflow:hidden
    }
    .sidebar {
      width:70px;
      background:#ffecec;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:space-between;
      padding:20px 0;
      box-shadow:2px 0 10px rgba(0,0,0,0.1)
    }
    .sidebar .top-icons,.sidebar .bottom-icons {
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:20px
    }
    .sidebar i {
      font-size:1.6rem;
      color:#888;
      cursor:pointer;
      transition:.3s
    }
    .sidebar i:hover {
      color:#ff80ab;
      transform:scale(1.2)
    }
    .sidebar .logout {
      color:red
    }
    .content {
      flex:1;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px
    }
    .instance-card {
      position:relative;
      width:70%;
      max-width:900px;
      aspect-ratio:16/9;
      background-size:cover;
      background-position:center;
      border-radius:20px;
      border:3px solid #fff;
      box-shadow:0 8px 20px rgba(0,0,0,0.2);
      overflow:hidden;
      cursor:pointer;
      transition:transform .4s ease
    }
    .instance-card:hover {
      transform:scale(1.05)
    }
    .instance-title {
      position:absolute;
      bottom:-50px;
      left:0;
      width:100%;
      text-align:center;
      background:rgba(0,0,0,.6);
      color:#fff;
      font-size:1.3rem;
      font-weight:bold;
      padding:10px;
      opacity:0;
      transition:all .4s ease
    }
    .instance-card:hover .instance-title {
      bottom:0;
      opacity:1
    }
    @media(max-width:768px) {
      body {
        flex-direction:column
      }
      .sidebar {
        flex-direction:row;
        width:100%;
        height:70px;
        padding:0 20px
      }
      .sidebar .top-icons,.sidebar .bottom-icons {
        flex-direction:row;
        gap:15px
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <div class="top-icons">
      <i class="fas fa-home" id="home-icon" title="Inicio"></i>
    </div>
    <div class="top-icons">
      <i class="fas fa-sign-out-alt logout" id="logout-icon" title="Cerrar SesiÃ³n"></i>
    </div>
  </div>
  <div class="content">
    <div class="instance-card" id="instance-card">
      <div class="instance-title" id="instance-title"></div>
    </div>
  </div>
  <script>
    const card=document.getElementById("instance-card")
    const title=document.getElementById("instance-title")
    const iconsContainer=document.getElementById("instances-icons")
    const fallbackURL="https://custom-url.com/no-instance"
    const logoutURL="https://custom-url.com/logout"
    let currentData=null
    async function loadInstances(){
      try{
        const res=await fetch("instancias.json?cache="+Date.now())
        const data=await res.json()
        if(JSON.stringify(data)===JSON.stringify(currentData))return
        currentData=data
        iconsContainer.innerHTML=""
        if(data.length>0){
          const instance=data[0]
          card.style.backgroundImage=`url('${instance.imagenURL}')`
          title.textContent=instance.titulo
          card.onclick=()=>window.location.href=instance.urlInstance
          data.forEach(inst=>{
            const icon=document.createElement("i")
            icon.className=inst.icon
            icon.title=inst.titulo
            icon.onclick=()=>window.location.href=inst.urlInstance
            iconsContainer.appendChild(icon)
          })
        }else{
          card.style.backgroundImage="url('https://via.placeholder.com/800x450/ddd/555?text=Sin+Instancias')"
          title.textContent="No hay instancias disponibles"
          card.onclick=()=>window.location.href=fallbackURL
        }
      }catch(err){console.error("Error cargando JSON",err)}
    }
    document.getElementById("home-icon").onclick=()=>window.location.href="/home"
    document.getElementById("logout-icon").onclick=()=>window.location.href=logoutURL
    loadInstances()
    setInterval(loadInstances,3000)
  </script>
</body>
</html>

